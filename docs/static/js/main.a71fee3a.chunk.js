(this.webpackJsonpsplooshkaboom=this.webpackJsonpsplooshkaboom||[]).push([[0],{11:function(e,t,n){e.exports=n(30)},16:function(e,t,n){},19:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),i=n(8),s=n.n(i),l=(n(16),n(10)),c=n(1),u=n.n(c),p=n(2),m=n(3),b=n(4),f=n(5),h=n(6),d=n(9),y=(n(18),n(19),null);var v=0;function w(e,t){var n=t(1*e.length);return(null!==y&&y.buffer===a.memory.buffer||(y=new Uint8Array(a.memory.buffer)),y).set(e,n/1),v=e.length,n}var g=null;function k(){return null!==g&&g.buffer===a.memory.buffer||(g=new Int32Array(a.memory.buffer)),g}var x=null;function E(e,t){return(null!==x&&x.buffer===a.memory.buffer||(x=new Float64Array(a.memory.buffer)),x).subarray(e/8,e/8+t)}function S(e,t,n){var r=w(e,a.__wbindgen_malloc),o=v,i=w(t,a.__wbindgen_malloc),s=v;a.calculate_probabilities(8,r,o,i,s,n);var l,c=k()[2],u=k()[3];return 0!==c&&(l=E(c,u).slice(),a.__wbindgen_free(c,8*u)),l}function C(e,t){return I.apply(this,arguments)}function I(){return(I=Object(p.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("function"===typeof Response&&t instanceof Response)){e.next=23;break}if("function"!==typeof WebAssembly.instantiateStreaming){e.next=15;break}return e.prev=2,e.next=5,WebAssembly.instantiateStreaming(t,n);case 5:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(2),"application/wasm"==t.headers.get("Content-Type")){e.next=14;break}console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e.t0),e.next=15;break;case 14:throw e.t0;case 15:return e.next=17,t.arrayBuffer();case 17:return a=e.sent,e.next=20,WebAssembly.instantiate(a,n);case 20:return e.abrupt("return",e.sent);case 23:return e.next=25,WebAssembly.instantiate(t,n);case 25:if(!((r=e.sent)instanceof WebAssembly.Instance)){e.next=30;break}return e.abrupt("return",{instance:r,module:t});case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function O(e){return j.apply(this,arguments)}function j(){return(j=Object(p.a)(u.a.mark((function e(t){var n,r,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},("string"===typeof t||"function"===typeof Request&&t instanceof Request||"function"===typeof URL&&t instanceof URL)&&(t=fetch(t)),e.t0=C,e.next=5,t;case 5:return e.t1=e.sent,e.t2=n,e.next=9,(0,e.t0)(e.t1,e.t2);case 9:return r=e.sent,o=r.instance,i=r.module,a=o.exports,O.__wbindgen_wasm_module=i,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=O,A=n(20)(["#004","#0a0","#0d0","#0f0","#6f6"]),q=function(e){return Object(d.a)(Array(e).keys())},T=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=null!==this.props.best&&this.props.best[0]==this.props.x&&this.props.best[1]==this.props.y;return o.a.createElement("div",{key:this.props.x+","+this.props.y,style:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",width:"70px",height:"70px",border:this.props.valid?"1px solid grey":"1px solid red",outline:e?"4px solid yellow":"",zIndex:e?1:0,fontFamily:"monospace",userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",color:"white",backgroundColor:null===this.props.text?A(this.props.prob):"HIT"===this.props.text?"#a2a":"#44a"},onClick:this.props.onClick},null===this.props.text?(100*this.props.prob).toFixed(2)+"%":this.props.text)}}]),n}(o.a.Component),M=_("/web-sploosh-kaboom/sploosh_wasm_bg.wasm"),W=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).state=e.makeEmptyState(),e.doComputation(e.state.grid,e.state.squidsGotten),e}return Object(b.a)(n,[{key:"makeEmptyState",value:function(){for(var e=[],t=[],n=0;n<8;n++)for(var a=0;a<8;a++)e[[a,n]]=null,t[[a,n]]=0;return{grid:e,squidsGotten:"unknown",probs:t,best:[3,3],valid:!0,observationProb:1}}},{key:"doComputation",value:function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r,o,i,s,l,c,p,m,b,f,h,d,y,v,w,g;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(performance.now(),a=[],r=[],o=0;o<8;o++)for(i=0;i<8;i++)"HIT"===(s=t[[i,o]])&&a.push(8*o+i),"MISS"===s&&r.push(8*o+i);for(l=-1,c=0,p=["0","1","2"];c<p.length;c++)n===(m=p[c])&&(l=Number(m));return e.next=8,M;case 8:if(b=S(Uint8Array.from(a),Uint8Array.from(r),l),console.debug(b),void 0!==b){for(f=0,h=0,d=-1,y=[],v=0;v<8;v++)for(w=0;w<8;w++)y[[w,v]]=b[8*v+w],null===t[[w,v]]&&b[8*v+w]>d&&(d=b[8*v+w],h=w,f=v);g=b[64],this.setState({probs:y,best:d>=0?[h,f]:null,valid:!0,observationProb:g})}case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onClick",value:function(e,t){var n=Object(l.a)({},this.state.grid),a=n[[e,t]];switch(a){case null:a="MISS";break;case"MISS":a="HIT";break;case"HIT":a=null}n[[e,t]]=a,this.setState({grid:n}),this.doComputation(n,this.state.squidsGotten)}},{key:"clearField",value:function(){var e=this.makeEmptyState();this.setState(e),this.doComputation(e.grid,e.squidsGotten)}},{key:"render",value:function(){for(var e=this,t=0,n=!0,a=0;a<8;a++)for(var r=0;r<8;r++)null!==this.state.grid[[r,a]]&&(t++,"HIT"===this.state.grid[[r,a]]&&(n=!1));return o.a.createElement("div",{style:{margin:"20px"}},o.a.createElement("span",{style:{fontSize:"150%",color:"white"}},"Shots used: ",t),o.a.createElement("br",null),q(8).map((function(t){return o.a.createElement("div",{key:t,style:{display:"flex"}},q(8).map((function(n){return o.a.createElement(T,{key:n+","+t,x:n,y:t,onClick:function(){return e.onClick(n,t)},text:e.state.grid[[n,t]],prob:e.state.probs[[n,t]],valid:e.state.valid,best:e.state.best})})))})),this.state.valid||o.a.createElement("div",{style:{fontSize:"150%",color:"white"}},"Invalid configuration! This is not possible."),o.a.createElement("br",null),o.a.createElement("div",{style:{fontSize:"150%"}},o.a.createElement("span",{style:{color:"white"}},"Number of squids killed:"),o.a.createElement("select",{style:{marginLeft:"20px",fontSize:"100%"},value:this.state.squidsGotten,onChange:function(t){e.setState({squidsGotten:t.target.value}),e.doComputation(e.state.grid,t.target.value)}},o.a.createElement("option",{value:"unknown"},"Unknown"),o.a.createElement("option",{value:"0"},"0"),o.a.createElement("option",{value:"1"},"1"),o.a.createElement("option",{value:"2"},"2")),o.a.createElement("br",null)),o.a.createElement("br",null),o.a.createElement("button",{style:{fontSize:"150%"},onClick:function(){e.clearField()}},"Reset"),o.a.createElement("br",null),n&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{color:"white",fontSize:"120%",marginTop:"20px"}},"Opening optimizer: Probability that this",o.a.createElement("br",null),"pattern would get at least one hit: ",this.state.valid?(100*Math.max(0,1-this.state.observationProb)).toFixed(2)+"%":"Invalid")))}}]),n}(o.a.Component),z=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"componentDidMount",value:function(){document.body.style.backgroundColor="#666"}},{key:"render",value:function(){return o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("div",{style:{display:"inline-block"}},o.a.createElement("div",{style:{display:"inline-block",width:"600px"}},o.a.createElement("h1",{style:{color:"white"}},"Sploosh Kaboom Probability Calculator"),o.a.createElement("p",{style:{color:"white"}},"This page gives exact probabilities (no approximation) of hitting a squid in each cell, given the observation of hits, misses, and completed squid kills. Click on the map to cycle a cell between HIT and MISS. You can also set the number of squids completely killed in the drop-down menu at the bottom. You should set this to the value you see in the game for the number of squids killed. This will yield slightly more accurate probabilities. The highest probability location to play will be shown with a yellow outline. If you play perfectly according to picking the highlighted cell you will win in 20 or fewer shots \u224818.5% of the time.")),o.a.createElement(W,null),o.a.createElement("span",{style:{color:"white"}},"Made by Peter Schmidt-Nielsen")))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.a71fee3a.chunk.js.map